# Create a dashboard
apiVersion: perses.dev/v1alpha1
kind: PersesDashboard
metadata:
  name: perses-dashboard-sample
  namespace: monitoring
spec:
  display:
    name: perses-dashboard-sample
  panels:
    defaultTimeSeriesChart:
      kind: Panel
      spec:
        display:
          name: defaultTimeSeriesChart
        plugin:
          kind: TimeSeriesChart
          spec: {}
        queries:
          - kind: TimeSeriesQuery
            spec:
              plugin:
                kind: PrometheusTimeSeriesQuery
                spec:
                  query: up
    seriesTest:
      kind: Panel
      spec:
        display:
          name: seriesTest
        plugin:
          kind: TimeSeriesChart
          spec: {}
        queries:
          - kind: TimeSeriesQuery
            spec:
              plugin:
                kind: PrometheusTimeSeriesQuery
                spec:
                  query: rate(caddy_http_response_duration_seconds_sum[$interval])
  layouts:
    - kind: Grid
      spec:
        display:
          title: Panel Group
          collapse:
            open: true
        items:
          - x: 0
            y: 0
            width: 12
            height: 6
            content:
              $ref: "#/spec/panels/defaultTimeSeriesChart"
          - x: 12
            y: 0
            width: 12
            height: 6
            content:
              $ref: "#/spec/panels/seriesTest"
  variables:
    - kind: ListVariable
      spec:
        name: interval
        allowAllValue: false
        allowMultiple: false
        plugin:
          kind: StaticListVariable
          spec:
            values:
              - value: 1m
                label: 1m
              - value: 5m
                label: 5m
        defaultValue: 1m
  duration: 1h